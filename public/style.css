/* style.css - 3D WhatsApp-like polished UI */

/* fonts and base */
* { box-sizing: border-box; margin:0; padding:0; }
:root{
  --bg1: #0f2027; --bg2: #203a43; --bg3: #2c5364;
  --glass: rgba(255,255,255,0.06);
  --glass-2: rgba(255,255,255,0.08);
  --me-start: #00c3ff; --me-end: #2ce69a;
  --friend-start: #ffd89b; --friend-end: #19547b;
  --accent: #00f5a0;
  --text-dark: #111827;
}
html,body{height:100%; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: radial-gradient(circle at 10% 20%, #2b5876 0%, transparent 30%), linear-gradient(135deg,#0f2027 0%, #203a43 50%, #2c5364 100%); -webkit-font-smoothing:antialiased; color: #111;}

.hidden{display:none !important}

/* center container */
#chat-container{
  width: 420px;
  height: 86vh;
  margin: 4vh auto;
  border-radius: 22px;
  overflow: hidden;
  display:flex;
  flex-direction:column;
  box-shadow: 0 30px 80px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.03);
  transform: perspective(1200px) rotateX(1.2deg) rotateY(-1.2deg);
}

/* header */
#chat-header{
  padding: 14px 18px;
  background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  display:flex; flex-direction:column; gap:4px;
  backdrop-filter: blur(6px);
}
#chat-header .title{font-weight:700; color:#fff; letter-spacing:0.2px; font-size:18px;}
#chat-header .sub{font-size:12px; color: #dbeafe; opacity:0.85;}

/* chat area */
#chat-area{
  padding: 18px;
  background-image: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
  flex:1;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:12px;
}

/* message */
.msg {
  max-width: 78%;
  padding: 10px 14px;
  border-radius: 18px;
  position: relative;
  font-size:14px;
  line-height:1.3;
  box-shadow: 0 8px 18px rgba(2,6,23,0.35);
  transform-origin: center;
  transition: transform 180ms ease, box-shadow 180ms ease;
}

/* hover 3D pop */
.msg:hover{ transform: translateZ(18px) translateY(-2px); box-shadow: 0 22px 40px rgba(2,6,23,0.45); }

/* me vs friend */
.msg.me {
  margin-left:auto;
  background: linear-gradient(135deg, var(--me-start), var(--me-end));
  color: #042a2b;
  border-bottom-right-radius: 6px;
}
.msg.friend {
  margin-right:auto;
  background: linear-gradient(135deg, var(--friend-start), var(--friend-end));
  color: #061425;
  border-bottom-left-radius: 6px;
}

/* speech-tail using pseudo */
.msg.me::after, .msg.friend::after{
  content:"";
  position:absolute; bottom:0; width:14px; height:14px; transform: translateY(50%) rotate(45deg);
  box-shadow: inherit;
}
.msg.me::after{ right: -6px; background: linear-gradient(135deg, var(--me-start), var(--me-end)); }
.msg.friend::after{ left: -6px; background: linear-gradient(135deg, var(--friend-start), var(--friend-end)); }

/* time */
.msg .time {
  display:block; font-size:11px; opacity:0.9; margin-top:8px; text-align:right;
}

/* audio bubble */
.audio-bubble {
  display:flex; align-items:center; gap:10px;
}
.play-btn {
  width:36px; height:36px; border-radius:8px; border: none; cursor:pointer;
  display:inline-grid; place-items:center; font-weight:700;
  box-shadow: 0 8px 18px rgba(0,0,0,0.25);
  background: rgba(255,255,255,0.9);
}
.msg.me .play-btn { background: rgba(0,0,0,0.06); color: #042a2b; }
.wave {
  width:160px; height:10px; border-radius:6px; background: linear-gradient(90deg,#ffffff20,#ffffff10); overflow:hidden;
}
.voice-duration { font-size:12px; opacity:0.9; }

/* footer status area */
.status-footer{
  min-height:34px;
  padding:8px 18px;
  display:flex;
  align-items:center;
  gap:10px;
  font-size:13px;
  color:#fff;
}

/* typing dots */
.typing {
  display:flex; gap:6px; align-items:center;
}
.typing .dot{ width:8px; height:8px; background:#fff; border-radius:50%; transform:scale(.8); opacity:.85; animation: dot 1s infinite; }
.typing .dot:nth-child(2){ animation-delay:.18s } .typing .dot:nth-child(3){ animation-delay:.36s }
@keyframes dot { 0%{ transform: translateY(0) scale(.8) } 50%{ transform: translateY(-6px) scale(1.15) } 100%{ transform: translateY(0) scale(.8) } }

/* recording indicator */
.recording {
  display:flex; align-items:center; gap:8px; color: #ffcec6; font-weight:700;
}
.recording .rec-dot{ width:10px; height:10px; background:#ff3747; border-radius:50%; animation: pulse 1s infinite; }
@keyframes pulse { 0%{ transform:scale(1); opacity:1 } 50%{ transform:scale(1.4); opacity:.45 } 100%{ transform:scale(1); opacity:1 } }

/* footer input */
#chat-footer{
  display:flex; gap:10px; padding:12px 14px; align-items:center;
  backdrop-filter: blur(6px);
  border-top: 1px solid rgba(255,255,255,0.03);
}
#text-input{
  flex:1; padding:10px 12px; border-radius:22px; border:none; outline:none; font-size:14px;
  background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(245,245,245,0.9));
  box-shadow: inset 0 2px 6px rgba(0,0,0,0.04);
}
#send-btn, #record-btn{
  width:44px; height:44px; border-radius:12px; border:none; cursor:pointer; font-size:18px;
  display:grid; place-items:center;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  transition: transform 160ms ease;
}
#send-btn{ background: linear-gradient(135deg, #83f0c9, #06d6a0); color: #042a2b; }
#record-btn{ background: linear-gradient(135deg,#ff9a9e,#fecfef); color: #4a0b1f; }
#send-btn:hover, #record-btn:hover{ transform: translateY(-4px) scale(1.02); }

/* modal */
.modal{ position: fixed; inset:0; display:grid; place-items:center; background: rgba(4,6,10,0.55); z-index: 9999; }
.modal-card{ width:360px; background:#fff; border-radius:12px; padding:18px; box-shadow: 0 20px 50px rgba(2,6,23,0.6); display:flex; flex-direction:column; gap:10px; }
.modal-card input{ padding:10px 12px; border-radius:8px; border:1px solid #e6e6e6; font-size:14px; }
.modal-card .modal-actions{ display:flex; justify-content:flex-end; }
.modal-card button{ padding:8px 12px; border-radius:8px; border:none; background:#2563eb; color:#fff; cursor:pointer; }
.modal-card .hint{ font-size:12px; color:#666; margin-top:6px; }
